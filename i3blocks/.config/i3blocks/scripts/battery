#!/usr/bin/env bash
set -euo pipefail

line="$(acpi -b | head -n1)"

status="$(awk -F': ' '{print $2}' <<<"$line" | cut -d',' -f1 | xargs)"
pct="$(awk -F', ' '{print $2}' <<<"$line" | tr -d '%')"

# Icon by charge level
if (( pct >= 90 )); then
    icon=""
elif (( pct >= 60 )); then
    icon=""
elif (( pct >= 30 )); then
    icon=""
elif (( pct >= 10 )); then
    icon=""
else
    icon=""
fi

# Charging override
if [[ "$status" == "Charging" ]]; then
    icon=""
fi

echo " ${icon}  ${pct}%"
